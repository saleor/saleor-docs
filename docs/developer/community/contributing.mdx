---
title: Contributing
---

We welcome all contributions to Saleor, including issues, new features, docs, discussions, and more. Read the following document to learn more about the process of contribution.

## Issues

Use Github Issues to report a bug or a problem that you found in Saleor. Use the "Bug report" issue template to provide information that will help us confirm the bug, such as steps to reproduce, expected behavior, Saleor version, and any additional context. When our team confirms a bug, it will be added to the internal backlog and picked up as soon as possible. When willing to fix a bug, let us know in the issue comment, and we will try to assist you on the way.

## New features
When willing to propose or add a new feature, we encourage you first to open a [discussion](https://github.com/saleor/saleor/discussions) or an issue (using "Feature request" template) to discuss it with the core team. This process helps us decide if a feature is suitable for Saleor or design it before any implementation starts.

Before merging, any new pull requests submitted to Saleor have to be reviewed and approved by the core team. We review pull requests daily, but if a pull request requires more time or feedback from the team, it will be marked as "queued for review".


## Managing dependencies

### Poetry

To guarantee repeatable installations, all project dependencies are managed using [Poetry](https://poetry.eustace.io/). The project’s direct dependencies are listed in `pyproject.toml`.
Running `poetry lock` generates `poetry.lock` which has all versions pinned.

You can install Poetry by using `pip install --pre poetry` or by following the official installation guide [here](https://github.com/sdispater/poetry#installation).
We recommend using at least version `1.0.0b` as it contains many fixes and features that Saleor relies on.

:::tip
We recommend that you use this workflow and keep `pyproject.toml` as well as `poetry.lock` under version control to make sure all computers and environments run exactly the same code.
:::

### Other tools

For compatibility, Saleor also provides `requirements.txt` and `requirements_dev.txt`.

These files should be updated by running `poetry export --without-hashes -f requirements.txt -o requirements.txt` and `poetry export --without-hashes -f requirements.txt -o requirements_dev.txt --dev`, respectively.

## File structure
We are using a standard Django structure - every app has its own directory, where you can find:
- migrations directory
- management directory
- models
- utils - that keeps some functions of general utility related to this module
- error codes - the definitions of errors that might appeared
- tests directory - that contains related tests,
- etc.

### API file structure
The `API` files are in `saleor/graphql/` directory. Every app has its own directory 
inside with:
- `schema.py` - with definitions of queries and mutations
- `sorters.py` - with definitions of sorters
- `filters.py` - with definitions of filters
- `types.py` - with definitions of corresponding types
- `enums.py` - with related enums
- `dataloaders.py` - with data loaders for the given module.
- mutations file or directory.
- test directory.

We are aiming to have `mutations` directory in every module with a file per every mutation
how it's done in the `checkout` directory. See an example below:

```bash
.
└── saleor
    └── graphql
        └── checkout
            ├── migrations
            │   └── checkout_create.py
            │   └── checkout_complete.py
            └── schema.py
```

### Tests file structure
We are keeping tests in `tests` directory. We are aiming to keep queries and mutations
in separate directories with a single file for every query and mutation. 
After joining it with the previous example, it would look like this:

```bash
.
└── saleor
    └── graphql
        └── checkout
            ├── migrations
            │   └── checkout_create.py
            │   └── checkout_complete.py
            ├── schema.py
            └── tests
                ├── migrations
                │   ├── test_checkout_complete.py
                │   └── test_checkout_create.py
                └── queries
                    └── test_checkout.py
```


## Testing
Testing are really important part of every project.
In Saleor we're using the `pytest` library and we mostly have unit tests.

The test file structure was introduced in the [tests file structure](contributing#tests-file-structure) part.
The main rule is not overloading test files. Always smaller files are preferable over big ones
where lots of logic is tested and it's hard to extend.
In the case of testing `API` we would like to split all tests into `mutations` and `queries`
section and test every query and mutation in a separate file.

### How to run tests?
To run tests just enter `pytest` in your terminal.
```bash
pytest
```

To speed time testing time, we recommend using the `reuse-db` flag.
```bash
pytest --reuse-db
```

### How to run particular tests?
As running all tests is quite time-consuming, sometimes you would like to run
only tests from one dictionary or even just a particular test.
You can use for that the following commands. In the case of a particular directory or file, 
just provide the path after the `pytest` command, like:
```bash
pytest --reuse-db saleor/graphql/app/tests
```

If you would like to run a particular test, you need to provide the path to the file
where the test is, and the file name after the `::` sign. In the case of running a single test
it's also worth using `-n0` flag to run the test only in one thread. It will significantly decrease time.
See an example below:

```bash
pytest --reuse-db saleor/graphql/app/tests/mutations/test_app_create.py::test_app_create_mutation -n0
```

### Using pdb when testing
If you would like to use `pdb` in code when running a test, you need to use a few flags
`-n0` to one tests in a single thread, `-s` to disable capturing standard output by pytest, and
`--allow-hosts` with default port, as we disabled sockets by default.
So the previous example will look like this:

```bash
pytest --reuse-db saleor/graphql/app/tests/mutations/test_app_create.py::test_app_create_mutation -n0 -s --allow-hosts=127.0.0.1
```

### Writing benchmark tests
The benchmark tests allow us to keep track of a number of database queries 
for mutations and queries. Tests should be added for every new
mutation or query for objects.
The benchmark tests are in `benchmark` directory, every test must be marked with 
`pytest.mark.django_db` and `pytest.mark.count_queries(autouse=False)` decorators
and must have `count_queries` argument. See, the following example:
...


To check the number of queries, just run the benchmark test, and after that call following command in your terminal:
```bash
django-queries show
```
You will see the number of queries that were performed for each test
in every file.


### Given, when, then
It's recommended to use `given`, `when`, `then` to distinguish between different parts of the test.
It significantly improves test readability and makes clear want you are testing at all.

### Don't be scared of docstrings
Use docstring, especially for more complicated tests. Usually, the test name describes
exactly what we are testing, but often the name is not enough to explain all
expected behaviour. Also, it will help to see that the test should be split into two,
as it tests too much logic at once. In addition it's really helpful in test maintaining.


## Coding style

Saleor uses various tools to maintain a common coding style and help with development.
To install all the development tools, run the following commands:

```shell
python -m pip install -r requirements_dev.txt
```

or use `poetry`:

```shell
poetry install
```

Saleor uses the [pre-commit](https://pre-commit.com/#install) tool to check and automatically fix any formatting issue before creating a git commit.

Run the following command to install pre-commit into your git hooks and have it run on every commit:

```shell
pre-commit install
```

For more information on how it works, see the `.pre-commit-config.yaml` configuration file.

Saleor has a strict formatting policy enforced by the [black formatting tool](https://github.com/python/black).

Module names should make their purpose obvious. Avoid generic file names such as `utils.py`.

### Linters

Use [black](https://github.com/python/black/) to make sure your code is correctly formatted.

Use [isort](https://github.com/timothycrosley/isort) to maintain consistent imports.

Use [pylint](https://www.pylint.org/) with the `pylint-django` plugin to catch errors in your code.

Use [pycodestyle](http://pycodestyle.pycqa.org/en/latest/) to make sure your code adheres to PEP 8.

Use [pydocstyle](http://pydocstyle.pycqa.org/en/latest/) to check that your docstrings are properly formatted.

## EditorConfig

[EditorConfig](http://editorconfig.org/) is a standard configuration file that aims to ensure consistent style across multiple programming environments.

Saleor’s repository contains [an `.editorconfig` file](https://github.com/saleor/saleor/blob/master/.editorconfig) describing our formatting requirements.

Most editors and IDEs support this file either directly or via plugins. See the [list of supported editors and IDEs](http://editorconfig.org/#download) for detailed instructions.

If you make sure that your programming environment respects the contents of this file, you will automatically get correct indentation, encoding, and line endings.

## Git commit messages

To speed up the review process and to keep the logs tidy, we recommend the following simple rules on how to write good commit messages:

### Summary line

- It should contain less than 50 characters. It is best to make it short
- Introduce what has changed, using imperatives: fix, add, modify, etc.

### Description

- Add extra explanation if you feel it will help others to understand the summary content
- If you want, use bullet points (each bullet beginning with a hyphen or an asterisk)
- Avoid writing in one line. Use line breaks so the reader does not have to scroll horizontally

:::tip
To ease review, try to limit your commits to a single, self-contained issue. This will also help others to understand and manage them in the future.
:::

For more information and tips on how to write good commit messages, see the GitHub [guide](https://github.com/erlang/otp/wiki/writing-good-commit-messages).
